version: '2'

services:
  stdm-db:
    image: ${PG_IMAGE}:${PG_VERSION_TAG}
    environment:
        POSTGRES_PASSWORD: 'stdmtest'
        POSTGRES_DB: 'stdm'
    
  qgis-testing-environment:
    image: ${QGIS_IMAGE}:${QGIS_VERSION_TAG}
    volumes:
        - /tmp/.X11-unix:/tmp/.X11-unix
        - ./:/tests_directory
    environment:
        DISPLAY: ':99'
        QT_X11_NO_MITSHM: '1'
    links:
        - stdm-db
    